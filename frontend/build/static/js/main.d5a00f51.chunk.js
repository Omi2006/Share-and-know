(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{161:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(70),l=a.n(c),o=(a(54),a(6)),s=a.n(o),i=a(11),u=a(7),m=a(13),d=a(8);function p(e){if(!document.cookie)return null;var t=document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.startsWith(e+"=")}));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}function f(e,t,a){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(s.a.mark((function e(t,a,n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:n,mode:"same-origin",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":p("csrftoken")},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:if(c=e.sent,!(r.status>399)){e.next=9;break}return e.abrupt("return",Promise.reject(new Error(c.errors[Object.keys(c.errors)[0]])));case 9:return e.abrupt("return",c);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Promise.reject(new Error("An error has occured, try again later")));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var h=r.a.createContext({}),E=h.Provider,g=h,v=a(164),y=a(165),j=a(21),w=a(12),O=a(71),k=a.n(O);a(43);function x(){var e=Object(n.useRef)(),t=Object(j.a)(),a=t.register,c=t.errors,l=t.handleSubmit,o=Object(n.useContext)(P);return r.a.createElement(v.a,{style:{margin:"15px",height:"100%"}},r.a.createElement(y.a,{md:"12"},r.a.createElement("h4",null,"Welcome back! Login to start interacting with other users"),r.a.createElement("img",{src:k.a,alt:"login",style:{width:"50vw",padding:"20px"}})),r.a.createElement(y.a,{md:"12"},r.a.createElement("form",{onSubmit:l((function(t){if(null!==e.current){if(e.current.disabled=!0,t.username.length<=0||t.password.length<=0)return w.b.error("Fill out all fields!",{duration:1e3}),e.current.disabled=!1,!1;var a=f("/knowledge/login",t,"POST");w.b.dismiss(),w.b.promise(a,{loading:"Loading...",error:function(t){return e.current.disabled=!1,t.toString()},success:function(t){return e.current.disabled=!1,o(t.username),"Logged in successfully!"}},{error:{duration:2e3}})}})),style:{margin:"auto",maxWidth:"320px",minWidth:"0px"}},r.a.createElement("input",{type:"text",placeholder:"Username",ref:a({required:!0}),className:"form-control input",name:"username","aria-label":"username"}),c.username&&r.a.createElement("p",{className:"error-message"},"Remember to fill out the username!"),r.a.createElement("input",{type:"password",placeholder:"Password",ref:a({required:!0}),className:"form-control input",name:"password","aria-label":"password"}),c.password&&r.a.createElement("p",{className:"error-message"},"Remember to fill out the password!"),r.a.createElement("input",{type:"submit",value:"Login",ref:e,"aria-label":"login",className:"btn btn-primary"}),r.a.createElement("footer",null,r.a.createElement("small",null,"Don't have an account? Register"," ",r.a.createElement(m.b,{to:"/register"},"here"))))))}var N=a(72),S=a.n(N);function C(){var e=Object(j.a)(),t=e.handleSubmit,a=e.errors,c=e.register,l=e.getValues,o=Object(n.useContext)(P),s=Object(n.useRef)();return r.a.createElement(v.a,{style:{margin:"15px"}},r.a.createElement(y.a,{md:"12"},r.a.createElement("h4",null,"Welcome! Register to interact with other users."),r.a.createElement("img",{src:S.a,alt:"Share online",style:{width:"40vw",padding:"20px"}})),r.a.createElement(y.a,{md:"12"},r.a.createElement("form",{style:{padding:"10px",margin:"auto",maxWidth:"320px"},onSubmit:t((function(e){if(null!==s.current){if(s.current.disabled=!0,e.username.length<=0||e.password.length<=0||e.confirm.length<=0||e.email.length<=0)return s.current.disabled=!1,w.b.error("Fill out all fields!",{duration:1e3}),!1;if(e.password!==e.confirm)return s.current.disabled=!1,w.b.error("Password and confirm fields must match!",{duration:1e3}),!1;var t=f("/knowledge/register",e,"POST");w.b.dismiss(),w.b.promise(t,{loading:"Loading...",error:function(e){return s.current.disabled=!1,e.toString()},success:function(e){return s.current.disabled=!1,o(e.username),"Account created successfully!"}},{error:{duration:2e3}})}}))},r.a.createElement("input",{type:"text",placeholder:"Username",ref:c({required:!0}),className:"form-control input",name:"username","aria-label":"username"}),a.username&&r.a.createElement("p",{className:"error-message"},"Remember to fill out the username!"),r.a.createElement("input",{type:"email",placeholder:"Email",className:"form-control input",name:"email","aria-label":"email",ref:c({required:!0}),style:{marginTop:"10px",marginBottom:"10px"}}),a.email&&r.a.createElement("p",{className:"error-message"},"Remember to fill out the email!"),r.a.createElement("input",{type:"password",placeholder:"Password",className:"form-control input",name:"password","aria-label":"password",ref:c({required:!0,validate:function(e){return e===l().confirm}}),style:{marginTop:"10px",marginBottom:"10px"}}),a.password&&r.a.createElement("p",{className:"error-message"},"required"===a.password.type?"Remember to fill out the password!":"Password and confirm fields must match!"),r.a.createElement("input",{type:"password",placeholder:"Confirm password",className:"form-control input",name:"confirm",ref:c({required:!0}),"aria-label":"confirm",style:{marginTop:"10px",marginBottom:"10px"}}),a.confirm&&r.a.createElement("p",{className:"error-message"},"Remember to fill out the confirm password!"),r.a.createElement("input",{type:"submit",value:"Register","aria-label":"register",ref:s,className:"btn btn-primary"}))))}var L=r.a.createContext({}),T=L.Provider,P=L,A=a(9);a(81);function R(e){var t=e.options,a=e.setSortBy,c=e.selected,l=Object(n.useState)(!1),o=Object(u.a)(l,2),s=o[0],i=o[1],m=H(),d=function(){return i(!s)},p=Object(A.c)({background:s?"#68d8ee":"#8ee4f5"}),f=Object(A.c)({y:s?180:0,immediate:m}).y,b=Object(A.c)({transform:s?"translateY(0)":"translateY(-40px)",opacity:s?1:0,config:A.b.gentle,immediate:m});return r.a.createElement("div",{className:"radio-container"},r.a.createElement(A.a.button,{style:p,"data-testid":"toggle",className:"radio-wrapper",onClick:d},r.a.createElement("div",{className:"radio"},r.a.createElement("p",{className:"visually-hidden"},"Change sort options"),r.a.createElement("p",null,c),r.a.createElement(A.a.p,{style:{transform:f.interpolate((function(e){return"rotateX(".concat(e,"deg)")}))}},s?"X":"\u25bc"))),r.a.createElement(A.a.div,{style:b,config:A.b.wobbly},s&&r.a.createElement("div",{className:"radio-content"},t.map((function(e){return r.a.createElement("div",{onClick:function(){return function(e){a(e),d()}(e)},key:e[0]},r.a.createElement("button",null,e[1]))})))))}var q=a(166),B=a(167);function _(e){var t=e.setSearch,a=e.type,n=e.setCurrentPage,c=Object(j.a)(),l=c.register,o=c.handleSubmit;return r.a.createElement(q.a,{onSubmit:o((function(e){t(e.search),n(1)})),style:{padding:"20px 2rem",paddingBottom:"0px"}},r.a.createElement(B.a,{for:"search"},"Find specific ",a),r.a.createElement("input",{className:"form-control",placeholder:"What do you want to search for?",type:"text",name:"search",id:"search",ref:l,style:{marginBottom:"15px"}}),r.a.createElement("input",{className:"btn btn-primary",value:"Search",type:"submit"}))}var W=a(17),z=a(14);a(55);function D(e){var t=e.children,a=Object(n.useState)(!0),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(localStorage.getItem("theme")),i=Object(u.a)(s,2),m=i[0],d=i[1],p=H(),f=Object(A.c)({opacity:l?0:1,transform:l?"translate3D(-100%, 0, 0)":"translate3D(0%, 0, 0)",immediate:p}),b=function(){o(!l)};return Object(n.useEffect)((function(){localStorage.setItem("theme",m),document.documentElement.setAttribute("data-theme",m)}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navnavbar"},r.a.createElement("button",{style:{padding:"0px ",zIndex:9998},onClick:b,className:"navnavicon"},r.a.createElement(W.a,{icon:z.c}),r.a.createElement("span",{className:"visually-hidden"},"Toggle sidebar")),r.a.createElement("button",{className:"theme navnavicon",style:{padding:"0px "},onClick:function(){return d("dark"===m?"light":"dark")}},r.a.createElement(W.a,{className:"theme",icon:"dark"===m?z.k:z.g}))),r.a.createElement(I,{toggleSidebar:b,style:f}),r.a.createElement("div",{style:{filter:!l&&"blur(5px)"},onClick:l?void 0:b},t))}var F=a(168),Y=a(169),M=Object(A.a)(F.a);function I(e){var t=e.toggleSidebar,a=e.style,c=Object(n.useContext)(g),l=Object(n.useContext)(P),o=Object(d.i)(),u=function(){var e=Object(i.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/logout");case 2:a=e.sent,n=a.json(),w.b.promise(n,{loading:"Loading...",error:function(e){return e.toString()},success:function(){return l(null),t(),"Logged out successfully!"}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){o(e),t()},p=[{onClick:function(){return m("/")},icon:z.f,name:"Home"},{onClick:function(){return m("/users")},name:"Users",icon:z.m}];return c?p.push({onClick:function(){return m("/joined")},icon:z.a,name:"Your hubs"},{onClick:u,icon:z.j,name:"Logout"}):p.push({onClick:function(){return m("/login")},icon:z.i,name:"Login"},{onClick:function(){return m("/register")},icon:z.l,name:"Register"}),r.a.createElement(M,{vertical:!0,style:a,className:"navnav"},r.a.createElement("h3",null,"Share"),r.a.createElement("hr",null),p.map((function(e){return r.a.createElement(Y.a,{key:e.name},r.a.createElement("button",{onClick:e.onClick,className:"navnavbutton navnavlink"},r.a.createElement(W.a,{icon:e.icon,className:"navnavitem"}),r.a.createElement("p",{className:"navnavtext"},e.name)))})))}var U=function(){return!window.matchMedia("(prefers-reduced-motion: no-preference)").matches};function H(){var e=Object(n.useState)(U),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=window.matchMedia("(prefers-reduced-motion: no-preference)");return e.addEventListener("change",(function(e){r(!e.matches)})),function(){e.removeEventListener("change",(function(e){r(!e.matches)}))}}),[]),a}var J=a(10),G=a(170),X=a(171),V=a(172);function $(e){var t=e.setCurrentPage,a=e.currentPage,n=e.last;return r.a.createElement(G.a,{style:{justifyContent:"center",padding:"10px 1.6rem",paddingRight:"3.2rem"}},r.a.createElement(X.a,{disabled:1===a,key:"prev"},r.a.createElement(V.a,{previous:!0,onClick:function(){return t(a-1)}})),Object(J.a)(new Set([1,a,n])).map((function(e){return r.a.createElement(X.a,{active:e===a,key:e},r.a.createElement(V.a,{onClick:function(){return t(e)}},e))})),r.a.createElement(X.a,{disabled:a===n,key:"next"},r.a.createElement(V.a,{next:!0,onClick:function(){return t(a+1)}})))}var K=a(173);a(34);function Q(e){var t=e.likes,a=e.uuid,c=e.setLikes,l=Object(n.useContext)(g),o=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/knowledge/post/".concat(a),{},"PUT");case 3:t=e.sent,c(t.likes),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w.b.error(e.t0.toString());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,l&&r.a.createElement("button",{onClick:o,className:"like-button"},r.a.createElement(W.a,{icon:z.e,title:"like button",className:t.includes(l)?"dislike-icon":"like-icon"}),r.a.createElement("span",{className:"visually-hidden"},t.includes(l)?"Like":"Dislike","the post")),r.a.createElement(K.a,{pill:!0,color:"info"},t.length))}var Z=a(174),ee=a(175);function te(e){var t=e.posts,a=e.isLoading,n=H(),c=Object(A.d)(t.length,t.map((function(e){return{from:{transform:"translate3D(100px,0,0)"},to:{transform:"translate3D(0,0,0)"},immediate:n}})));return a?r.a.createElement(Z.a,{color:"primary"}):t.length>0?r.a.createElement(ee.a,{className:"deck"},c.map((function(e,a){return r.a.createElement(A.a.div,{style:e,key:t[a].id,className:"col-md-12"},r.a.createElement(Oe,{post:t[a]}))}))):r.a.createElement("h5",{style:{margin:"20px",textAlign:"center"}},"Nothing to see here!")}var ae=a(176),ne=a(30),re=a.n(ne);function ce(){var e=Object(n.useRef)(),t=Object(j.a)(),a=t.register,c=t.handleSubmit,l=t.errors,o=Object(d.h)().pathname,s=Object(d.i)();return r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement("h3",null,"New post"),r.a.createElement(q.a,{style:{margin:"10px"},method:"POST",onSubmit:c((function(t){if(null!==e.current){e.current.disabled=!0,t.hubs=o.split("/");var a=f("/knowledge/new/post",t,"POST");w.b.promise(a,{loading:"Loading...",error:function(t){return e.current.disabled=!1,t.toString()},success:function(t){return e.current.disabled=!1,s("/hubs/".concat(t.hub_path,"/posts/").concat(t.uuid)),"Post created successfully!"}})}}))},r.a.createElement("h6",null,"In here you make a new post. The content will be rendered using markdown."," ",r.a.createElement("a",{href:"https://www.markdowntutorial.com/",target:"_blank",rel:"noopener noreferrer"},"What is markdown and how to use it.")),r.a.createElement(ae.a,null,r.a.createElement(B.a,{for:"title"},"Title: "),r.a.createElement("input",{type:"text","aria-label":"title",name:"title",id:"title",placeholder:"Title...",className:"form-control",ref:a({required:!0,validate:function(e){return e.length<65}})}),l.title&&r.a.createElement("p",{className:"error-message"},"required"===l.title.type?"You must provide a title!":"Title must be 64 characters at most!")),r.a.createElement(ae.a,null,r.a.createElement(B.a,{for:"content"},"Content: "),r.a.createElement(re.a,{type:"text","aria-label":"content",name:"content",id:"content",className:"form-control",placeholder:"Some good content...",ref:a({required:!0}),rows:20,maxLength:"2050"}),l.content&&r.a.createElement("p",{className:"error-message"},"You must provide some content!")),r.a.createElement("input",{type:"submit",value:"Create post",className:"btn btn-primary",ref:e})))}var le=a(177),oe=a(178),se=a(179),ie=a(180),ue=a(181),me=a(22),de=a.n(me),pe=a(42),fe=a.n(pe);function be(e){var t=e.comment,a=Object(n.useContext)(g),c=Object(n.useRef)(),l=Object(n.useState)(t.content),o=Object(u.a)(l,2),s=o[0],i=o[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),b=p[0],h=p[1],E=function(){return h(!b)};return r.a.createElement(le.a,{style:{marginTop:"20px",marginBottom:"20px"}},r.a.createElement(oe.a,{style:{backgroundColor:"rgb(203, 223, 230)",display:"inline-flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(m.b,{to:"/users/".concat(t.commenter),className:"discrete-link",style:{display:"inline-flex"}},r.a.createElement(de.a,{size:"28",string:t.commenter}),r.a.createElement("h4",{style:{marginLeft:"10px"}},t.commenter)),r.a.createElement(se.a,{className:"text-muted"},t.date)),t.commenter===a&&r.a.createElement("div",null,b&&r.a.createElement(ie.a,{color:"danger",style:{fontSize:"0.9rem"},outline:!0,title:"Cancel",onClick:E},r.a.createElement("span",{className:"visually-hidden"},"cancel"),r.a.createElement(W.a,{icon:z.n})),r.a.createElement(ie.a,{color:b?"success":"primary",style:{marginLeft:"10px",fontSize:"0.9rem"},outline:!0,title:b?"Save":"Edit",disabled:c.current&&c.current.length<1,onClick:function(){if(c.current){var e=c.current.value;if(e.length>256)return void w.b.error("Comment must be less than 256 characters long");i(e);var a=f("/knowledge/comment/".concat(t.id),{content:e},"PUT");w.b.promise(a,{loading:"Loading...",error:function(e){return e.toString()},success:"Comment edited successfully!"},{error:{duration:2e3}})}E()}},r.a.createElement("span",{className:"visually-hidden"},b?"save":"edit"),r.a.createElement(W.a,{icon:b?z.h:z.d})))),r.a.createElement(ue.a,{style:{backgroundColor:"rgb(215, 245, 255)"}},b?r.a.createElement(re.a,{className:"edit-comment",ref:c,maxLength:"256"},s):r.a.createElement(fe.a,{style:{whiteSpcae:"preWrap",marginTop:"0px",marginBottom:"1rem"}},s)))}var he=a(31);function Ee(e){var t=e.comments,a=H(),c=Object(n.useState)(1),l=Object(u.a)(c,2),o=l[0],s=l[1],i=Object(n.useState)(t.slice(0,5)),m=Object(u.a)(i,2),d=m[0],p=m[1],f=Object(A.e)(d,(function(e){return e.id}),{from:{opacity:0,transform:"translate3D(-100px,0,0)"},enter:{opacity:1,transform:"translate3D(0,0,0)"},config:A.b.wobbly,immediate:a}),b=window.pageYOffset;return Object(n.useEffect)((function(){p(t.slice(0,5*o))}),[t]),Object(n.useEffect)((function(){window.scroll({top:b})}),[d,b]),r.a.createElement("div",null,f.map((function(e){var t=e.item,a=e.key,n=e.props;return r.a.createElement(A.a.div,{style:Object(he.a)({},n,{overflow:"hidden"}),key:a},r.a.createElement(be,{comment:t}))})),5*o<=t.length&&r.a.createElement("button",{className:"btn btn-primary center",onClick:function(){p([].concat(Object(J.a)(d),Object(J.a)(t.slice(5*o,5*(o+1))))),s(o+1)}},"Load more"))}function ge(e){var t=e.setComments,a=e.post,c=Object(j.a)(),l=c.register,o=c.handleSubmit,s=c.reset,i=c.errors,u=Object(n.useRef)();return r.a.createElement("div",null,i.content&&r.a.createElement("p",{className:"error-message"},"required"===i.content.type?"You must fill out the comment!":"Comment must be under 257 characters!"),r.a.createElement(q.a,{onSubmit:o((function(e){if(u.current.disabled=!0,e.content.length<1)return w.b.error("You must fill out the comment!"),void(u.current.disabled=!1);var n=f("/knowledge/comment",{content:e.content,post:a},"POST");w.b.promise(n,{loading:"Loading...",error:function(e){return u.current.disabled=!1,e.toString()},success:function(e){return s(),t((function(t){return[e.comment].concat(Object(J.a)(t))})),u.current.disabled=!1,"Comment created successfully!"}},{error:{duration:2e3}})}))},r.a.createElement(ae.a,null,r.a.createElement(re.a,{ref:l({required:!0,validate:function(e){return e.length<257}}),placeholder:"A valuable comment...",name:"content","aria-label":"Comment content",className:"form-control"})),r.a.createElement("input",{type:"submit",value:"Share your comment",className:"btn btn-primary",ref:u})))}function ve(){var e=Object(d.j)().uuid,t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(),p=Object(u.a)(o,2),f=p[0],b=p[1],h=Object(n.useState)([]),E=Object(u.a)(h,2),v=E[0],y=E[1],j=Object(n.useContext)(g);return Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/knowledge/post/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,l(n),b(n.likes),y(n.comments);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(n.useEffect)((function(){console.log(v)}),[v]),c.content?r.a.createElement("div",{style:{padding:"25px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(m.b,{to:"/users/".concat(c.poster),className:"discrete-link",style:{display:"inline-flex",marginBottom:"10px",width:"min-content"}},r.a.createElement(de.a,{size:"33",string:c.poster}),r.a.createElement("h3",{style:{marginLeft:"10px"}},c.poster)),r.a.createElement(m.b,{to:"/hubs/".concat(c.hub.full_path),style:{width:"min-content"}},r.a.createElement(K.a,{color:"primary"},c.hub.title)),f&&r.a.createElement(Q,{setLikes:b,likes:f,uuid:c.uuid}),r.a.createElement("footer",{style:{fontSize:"12px"}},c.date),r.a.createElement("h1",{id:"post-title"},c.title)),r.a.createElement("hr",null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"post-div"},r.a.createElement(fe.a,null,c.content)),r.a.createElement("hr",null),j?r.a.createElement(ge,{post:c.id,setComments:y}):r.a.createElement("h2",{className:"error-message"},"You must be logged in to comment!"),v&&v.length>0?r.a.createElement(Ee,{comments:v}):r.a.createElement("h3",{color:"info"},"There are no comments here!"))):c.error?r.a.createElement("h2",null,"This post couldn't be found"):r.a.createElement(Z.a,{color:"primary"})}var ye=a(182),je=a(183),we=a(184);function Oe(e){var t=e.post,a=Object(d.i)();return r.a.createElement(le.a,{className:"hover-card",onClick:function(){return a("/hubs/".concat(t.path,"/posts/").concat(t.uuid))},title:"See more"},r.a.createElement(oe.a,{style:{backgroundColor:"#68d8ee"}},r.a.createElement(ye.a,null,r.a.createElement("h5",null,t.title)),r.a.createElement(je.a,{style:{display:"inline-flex"}},r.a.createElement(de.a,{size:"20",string:t.poster}),r.a.createElement("h6",{style:{marginLeft:"10px"}},t.poster))),r.a.createElement(ue.a,{className:"back-blue"},r.a.createElement(se.a,{className:"post-content"},t.content)),r.a.createElement(we.a,{className:"footer back-blue"},r.a.createElement("p",{className:"card-link"},r.a.createElement(m.b,{to:"/hubs/".concat(t.path,"/posts/").concat(t.uuid),"aria-label":"see more"},r.a.createElement(W.a,{icon:z.b}),r.a.createElement("span",{className:"visually-hidden"},"See more"))),r.a.createElement(se.a,{className:"text-muted"},t.date)))}function ke(e){var t=e.filter,a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(1),d=Object(u.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(["-date","Newest"]),h=Object(u.a)(b,2),E=h[0],g=h[1];Object(n.useEffect)((function(){o({}),function(){var e=Object(i.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/hub/items/1?page=".concat(p,"&sort=").concat(E[0],"&type=posts&search=&filter=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p,E,t]);return null===l?r.a.createElement(Z.a,{color:"primary"}):r.a.createElement("div",{style:{overflow:"hidden"},className:"wrapper"},r.a.createElement(R,{options:[["-date","Newest"],["date","Oldest"],["-likes","Most Liked"],["likes","Least liked"]],setSortBy:g,selected:E[1]}),l.results?r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{posts:l.results}),r.a.createElement($,{currentPage:p,last:l.total,setCurrentPage:f})):r.a.createElement(Z.a,{color:"primary"}))}function xe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{textAlign:"center"}},"Posts from hubs you belong to"),r.a.createElement(ke,{filter:"joined"}))}var Ne=a(185);a(69);function Se(){var e,t=Object(n.useContext)(g),a=Object(n.useState)(void 0),c=Object(u.a)(a,2),l=c[0],o=c[1],p=Object(n.useState)((null===l||void 0===l||null===(e=l.members)||void 0===e?void 0:e.includes(t))?"Leave":"Join"),b=Object(u.a)(p,2),h=b[0],E=b[1],v=Object(n.useState)(["-date","Newest"]),y=Object(u.a)(v,2),j=y[0],O=y[1],k=Object(n.useState)(!0),x=Object(u.a)(k,2),N=x[0],S=x[1],C=Object(n.useState)({}),L=Object(u.a)(C,2),T=L[0],P=L[1],A=Object(n.useState)(1),q=Object(u.a)(A,2),B=q[0],W=q[1],z=Object(n.useState)("posts"),D=Object(u.a)(z,2),F=D[0],Y=D[1],M=Object(n.useState)(""),I=Object(u.a)(M,2),U=I[0],H=I[1],J=Object(d.j)().title,G=Object(d.h)().pathname.split("/");Object(n.useEffect)((function(){l||function(){var e=Object(i.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/hub/details/".concat(J,"?list=").concat(G));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,o(n),E(n.members.includes(t)?"Leave":"Join");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[J,l,G,t]),Object(n.useEffect)((function(){(S(!0),void 0!==l)&&function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/hub/items/".concat(l.id,"?sort=").concat(j[0],"&page=").concat(B,"&type=").concat(F,"&search=").concat(U));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,P(a),S(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,B,F,U,j,t]);var X=[["-date","Newest"],["date","Oldest"]];return"posts"===F&&X.push(["-likes","Most Liked"],["likes","Least liked"]),void 0===l?r.a.createElement(Z.a,{color:"primary"}):l.error?r.a.createElement("h3",null,"We couldn't find this hub."):r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement(Ne.a,{style:{paddingTop:0,marginTop:"-20px",whiteSpace:"pre-wrap"}},r.a.createElement("hr",null),r.a.createElement("h3",{className:"display-3 hub-name"},J.replace(/-/g," ")),t&&r.a.createElement(ie.a,{onClick:function(){var e=f("/knowledge/joined",{hub:l.id},"PUT");w.b.promise(e,{loading:"Loading...",error:function(e){return e.toString()},success:function(e){return E(e.status),"Leave"===e.status?"Hub joined successfully":"Hub left successfully"}})},color:"success",style:{color:"black"}},h),r.a.createElement("p",{style:{fontSize:"1.5rem"}},l.description),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(Re,{type:F,handleTypeChange:function(){S(!0),Y("posts"===F?"hubs":"posts"),O(["-date","Newest"]),W(1)}}),t&&("posts"===F?l.full_path.includes("/")&&r.a.createElement(m.b,{to:"posts/new",className:"lead"},"+ New post"):r.a.createElement(m.b,{to:"new",className:"lead"},"+ New Hub")))),r.a.createElement("div",{className:"wrapper"},r.a.createElement(_,{setSearch:H,type:F,setCurrentPage:W}),r.a.createElement(R,{options:X,setSortBy:O,selected:j[1]}),"posts"===F?r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{posts:T.results||[],isLoading:N}),r.a.createElement($,{currentPage:B,last:T.total,setCurrentPage:W})):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{hubs:T.results,isLoading:N}),r.a.createElement($,{currentPage:B,last:T.total,setCurrentPage:W}))))}function Ce(e){var t=e.hubs,a=e.isLoading,n=H(),c=Object(A.d)(t.length,t.map((function(e){return{from:{transform:"translate3D(0,100px,0)"},to:{transform:"translate3D(0,0,0)"},immediate:n}})));return a?r.a.createElement(Z.a,{color:"primary"}):t.length>0?r.a.createElement(ee.a,{className:"deck wrapper"},c.map((function(e,a){return r.a.createElement(A.a.div,{style:e,className:"col-md-12",key:t[a].id},r.a.createElement(Ae,{hub:t[a]}))}))):r.a.createElement("h5",{style:{margin:"20px",textAlign:"center"}},"Nothing to see here!")}var Le=a(186),Te=a(187);function Pe(){var e=Object(d.h)().pathname,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var t=e.split("/");"posts"===t[t.length-2]&&t.splice(-2),"posts"===(t=t.filter((function(e){return!["","hubs","new"].includes(e)})))[t.length-2]&&t.splice(-2),l(t)}),[e]),e.split("/").includes("hubs")&&c?r.a.createElement(Le.a,{style:{paddingTop:0}},c.map((function(e,t){return r.a.createElement(Te.a,{key:t},r.a.createElement(m.b,{to:"/hubs/".concat(c.slice(0,t+1).join("/"))},e))}))):null}function Ae(e){var t=e.hub,a=Object(d.i)();return r.a.createElement(le.a,{onClick:function(){return a(t.title)},title:"Go to hub",className:"hover-card"},r.a.createElement(oe.a,{className:"back-green"},r.a.createElement(ye.a,null,r.a.createElement("h5",null,t.title.replace(/-/g," "))),r.a.createElement(je.a,null,r.a.createElement("p",{style:{fontSize:"0.85em"}},"Made ",t.date))),r.a.createElement(ue.a,{style:{backgroundColor:"#a2ffaf"}},r.a.createElement(se.a,null,t.description)),r.a.createElement(we.a,{className:"footer back-green"},r.a.createElement("p",{className:"card-link"},r.a.createElement(m.b,{to:"".concat(t.title),"aria-label":"see more"},r.a.createElement(W.a,{icon:z.b}),r.a.createElement("span",{className:"visually-hidden"},"See more")))))}function Re(e){var t=e.type,a=e.handleTypeChange,n=H(),c=Object(A.c)({transform:"hubs"!==t?"translate3D(100%,0,0)":"translate3d(0,0,0)",color:"hubs"!==t?"white":"black",config:Object(he.a)({},A.b.molasses,{friction:60}),immediate:n}),l=c.transform,o=c.color;return r.a.createElement(ie.a,{color:"primary",className:"lead type-toggle-button",onClick:a,style:{borderColor:"hubs"===t&&"#86eb93"}},r.a.createElement(A.a.span,{style:{color:o},className:"type-toggle-span"},t.charAt(0).toUpperCase()+t.slice(1)),r.a.createElement(A.a.div,{className:"type-toggle-div",style:{transform:l}}))}function qe(){var e=Object(j.a)(),t=e.register,a=e.errors,n=e.handleSubmit,c=Object(d.h)().pathname,l=Object(d.i)();return r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",{style:{textAlign:"center",marginTop:"30px"}},"Make a new hub"),r.a.createElement("h5",{style:{margin:"20px"}},"Create a new hub to share all sorts of things with others!"),r.a.createElement(q.a,{onSubmit:n((function(e){e.hubs=c.split("/"),e.title=e.title.replace(/ /g,"-");var t=f("/knowledge/new/hub",e,"POST");w.b.promise(t,{loading:"Loading...",error:function(e){return e.toString()},success:function(e){return l("/hubs/".concat(e.full_path)),"Hub created successfully!"}})})),style:{textAlign:"left"}},r.a.createElement(ae.a,null,r.a.createElement(B.a,{for:"title"},"Hub name"),r.a.createElement("input",{type:"text",id:"title",className:"form-control input",name:"title",placeholder:"A nice name...",ref:t({required:!0,validate:{length:function(e){return e.length<21},name:function(e){return"new"!==e.toLowerCase()&&"posts"!==e.toLowerCase()}}})}),a.title&&r.a.createElement("p",{className:"error-message"},"required"===a.title.type?"You need to give the hub a name!":"length"===a.title.type?"The hub name must be under 21 characters!":"That hub name is not allowed!")),r.a.createElement(ae.a,null,r.a.createElement(B.a,{for:"description"},"The hub description"),r.a.createElement("input",{type:"text",id:"description",className:"form-control input",name:"description",placeholder:"An awesome description...",ref:t({required:!0,validate:function(e){return e.length<101}})}),a.description&&r.a.createElement("p",{className:"error-message"},"required"===a.description.type?"You need to give the hub a description!":"The hub description must be under 101 characters!")),r.a.createElement("input",{type:"submit",value:"New hub",className:"btn btn-primary"})))}function Be(){var e=Object(d.j)().username,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/knowledge/user/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,l(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),c?c.error?r.a.createElement("h2",null,"This user could not be found"):r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"50px"}},r.a.createElement("div",{style:{display:"flex",marginBottom:"20px"}},r.a.createElement(de.a,{size:"80",bg:"white",string:e}),r.a.createElement("div",{style:{marginLeft:"20px"}},r.a.createElement("h2",null,e),r.a.createElement("h5",null,"Has ",c.post_count," posts"),r.a.createElement("h5",null,"Member of ",c.joined_hubs_count," hubs"))),r.a.createElement("hr",null),r.a.createElement("h3",{style:{textAlign:"center"}},"Posts from ",e)),r.a.createElement(ke,{filter:e})):r.a.createElement(Z.a,{color:"primary"})}var _e=a(188);function We(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),m=o[0],d=o[1],p=H(),f=Object(A.e)(a,(function(e){return e.id}),{enter:{height:83,opacity:1},from:{height:0,opacity:0},leave:{height:0,opacity:0},immediate:p});return Object(n.useEffect)((function(){""!==m&&function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/users?search=".concat(m));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[m]),r.a.createElement("div",{className:"wrapper",style:{marginTop:"30px"}},r.a.createElement("h2",{style:{textAlign:"center"}},"Users"),r.a.createElement(_,{type:"users",setSearch:d,setCurrentPage:function(){}}),a.length>0?r.a.createElement(_e.a,{flush:!0,className:"item-list"},f.map((function(e){var t=e.props,a=e.key,n=e.item;return r.a.createElement(A.a.div,{key:a,style:Object(he.a)({},t,{width:"100%"})},r.a.createElement(De,{user:n.username}))}))):r.a.createElement("h3",{style:{textAlign:"center"}},"No users match your search!"))}var ze=a(189);a(161);function De(e){var t=e.user,a=Object(d.i)();return r.a.createElement(ze.a,{onClick:function(){return a("/users/".concat(t))},className:"item"},r.a.createElement(de.a,{string:t,size:"35",bg:"white"}),r.a.createElement("div",{style:{marginLeft:"20px"}},r.a.createElement("h6",null,t),r.a.createElement(m.b,{to:"/users/".concat(t),"aria-label":"see user"},r.a.createElement(W.a,{icon:z.b}),r.a.createElement("span",{className:"visually-hidden"},"See user"))))}function Fe(){return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"Welcome! Choose any of the hubs to start sharing!"),r.a.createElement(ee.a,{className:"big-wrapper deck"},r.a.createElement(v.a,null,[{title:"Technology",color:"#9b9bf7"},{title:"History",color:"#e6aeae"},{title:"Math",color:"yellow"},{title:"Geography",color:"brown"},{title:"Science",color:"green"},{title:"Art",color:"Orange"},{title:"Fun",color:"pink"},{title:"Other-stuff",color:"purple"}].map((function(e){return r.a.createElement(y.a,{md:"6",style:{padding:0,marginBottom:"15px"},key:e.id},r.a.createElement(Ye,{hub:e}))})))))}function Ye(e){var t=e.hub,a=Object(d.i)();return r.a.createElement(le.a,{onClick:function(){return a("/hubs/".concat(t.title))},title:"Go to hub",className:"hover-card",style:{marginLeft:"15px",boxShadow:"3px 5px 6px ".concat(t.color)}},r.a.createElement(oe.a,{className:"back-green"},r.a.createElement(ye.a,null,r.a.createElement("h5",null,t.title.replace(/-/g," "))),r.a.createElement(je.a,null,r.a.createElement("p",{style:{fontSize:"0.85em"}},"Made at the beginning"))),r.a.createElement(ue.a,{style:{backgroundColor:"#a2ffaf"}},r.a.createElement(se.a,null,"For all things related to ",t.title.replace(/-/g," "))),r.a.createElement(we.a,{className:"footer back-green"},r.a.createElement("p",{className:"card-link"},r.a.createElement(m.b,{to:"/hubs/".concat(t.title),"aria-label":"see more"},r.a.createElement(W.a,{icon:z.b}),r.a.createElement("span",{className:"visually-hidden"},"See more")))))}a(162);function Me(){var e=Object(n.useState)(void 0),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){if(void 0!==a)return function(){};(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/knowledge/login");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.user,c(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement(m.a,null,r.a.createElement(w.a,null),r.a.createElement(E,{value:a},r.a.createElement(T,{value:c},r.a.createElement(D,null,r.a.createElement("div",{className:"App"},r.a.createElement(Pe,null),r.a.createElement(d.e,null,r.a.createElement(d.c,{path:"/",element:r.a.createElement(Fe,null)}),r.a.createElement(d.c,{path:"/joined",element:a?r.a.createElement(xe,null):r.a.createElement(x,null)}),r.a.createElement(d.c,{path:"/users",element:r.a.createElement(We,null)}),r.a.createElement(d.c,{path:"/users/:username",element:r.a.createElement(Be,null)}),r.a.createElement(d.c,{path:"/register",element:a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(C,null)}),r.a.createElement(d.c,{path:"/login",element:a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(x,null)}),r.a.createElement(d.c,{path:"posts/:uuid",element:r.a.createElement(ve,null)}),r.a.createElement(d.c,{path:"/hubs/:title*",element:r.a.createElement(Ie,null)},r.a.createElement(d.c,{path:"/",element:r.a.createElement(Se,null)}),r.a.createElement(d.c,{path:"posts/:uuid",element:r.a.createElement(ve,null)}),r.a.createElement(d.c,{path:"new",element:a?r.a.createElement(qe,null):r.a.createElement(x,null)}),r.a.createElement(d.c,{path:":title*",element:r.a.createElement(Ue,{loggedIn:a})})),r.a.createElement(d.c,{path:"*"},r.a.createElement("h3",null,"This page couldn't be found :("))))))))}function Ie(){return r.a.createElement(d.b,null)}function Ue(e){var t=e.loggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.e,null,r.a.createElement(d.c,{path:"/",element:r.a.createElement(Se,null)}),r.a.createElement(d.c,{path:"posts/new",element:t?r.a.createElement(ce,null):r.a.createElement(x,null)}),r.a.createElement(d.c,{path:"posts/:uuid",element:r.a.createElement(ve,null)}),r.a.createElement(d.c,{path:"new",element:t?r.a.createElement(qe,null):r.a.createElement(x,null)}),r.a.createElement(d.c,{path:":title*",element:r.a.createElement(Ue,{loggedIn:t})})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){},43:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){e.exports=a.p+"static/media/undraw_Login_re_4vu2.303e4a67.svg"},72:function(e,t,a){e.exports=a.p+"static/media/undraw_share_online_r87b.fbd5ff07.svg"},73:function(e,t,a){e.exports=a(163)},81:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.d5a00f51.chunk.js.map